---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const posts = await getCollection("posts");

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: post,
  }));
}

const post = Astro.props;
const { Content } = await post.render();
---

<BaseLayout title={post.data.title} description={post.data.excerpt}>
  <Navbar slot="navbar" />

  <article class="blog-article">
    <!-- Header -->
    <header class="blog-header">
      <span class="badge">ML MONDAYS</span>

      <h1>{post.data.title}</h1>

      <div class="meta">
        <span class="author">{post.data.author}</span>
        <span>Â·</span>
        <time>{post.data.date}</time>
      </div>

      {post.data.tags && (
        <div class="tags">
          {post.data.tags.map(tag => (
            <span class="tag">#{tag}</span>
          ))}
        </div>
      )}
    </header>

    <!-- Content -->
    <div class="blog-content">
      <Content />
    </div>
  </article>

  <Footer slot="footer" />
</BaseLayout>

